<html lang="en"><head>
  <meta charset="UTF-8">
  <title>A2Z113 Userapps - Backpack Skip</title>
<link rel="stylesheet" href="chrome-extension://ihcjicgdanjaechkgeegckofjjedodee/app/content-style.css"></head>
<body>
  <!---- 
  <h1>Tycoon UserApp Trigger: Open Backpack (new)</h1>
  <p>This UserApp registers a trigger to open the backpack menu.</p>
  --->
  <script>
let isOpening = false;

window.parent.postMessage({
  type: 'registerTrigger',
  trigger: 'open_backpack',
  name: 'Open Backpack (Modded)'
}, "*");

window.addEventListener("message", (event) => {
  const evt = event.data;
  for (const key in evt.data)
    {
    if (key === "trigger_open_backpack" && !isOpening) {
      isOpening = true;

      // Open M menu silently
      window.parent.postMessage({
        type: "openMainMenu"
      }, "*");

      // Delay and force backpack open
      setTimeout(() => {
        window.parent.postMessage({
          type: "forceMenuChoice",
          choice: "Open Backpack",
          mod: 0
        }, "*");

        // Wait a bit more to ensure it's opened fully, then unlock
        setTimeout(() => {
          isOpening = false;
        }, 800); // Adjust this based on how long the menu typically takes
      }, 300);
    }
  }
});
</script>


</body></html>
